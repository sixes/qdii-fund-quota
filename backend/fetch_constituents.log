[2025-10-11 11:42:47] [INFO] Starting Dow Jones constituents processing...
[2025-10-11 11:42:47] [INFO] Logs will be saved to: /Users/tony/Documents/Project/fund-quota/backend/fetch_constituents.log
[2025-10-11 11:42:47] [INFO] Using proxy for financial data fetching
[2025-10-11 11:42:47] [INFO] ATH batch size: 50, Ratios batch size: 50
[2025-10-11 11:42:47] [INFO] ============================================================
[2025-10-11 11:42:47] [INFO] STEP 1: LOADING EXISTING DATA FROM DYNAMODB
[2025-10-11 11:42:47] [INFO] ============================================================
[2025-10-11 11:42:48] [INFO] Found credentials in shared credentials file: ~/.aws/credentials
[2025-10-11 11:42:49] [INFO] DynamoDB table 'index-constituents' already exists
[2025-10-11 11:42:49] [INFO] Loading existing data for Dow Jones...
[2025-10-11 11:42:49] [INFO] Loaded 30 existing constituents for Dow Jones
[2025-10-11 11:42:49] [INFO] Total existing constituents loaded: 30
[2025-10-11 11:42:49] [INFO] ============================================================
[2025-10-11 11:42:49] [INFO] STEP 2: UPDATING ATH PRICES AND FINANCIAL RATIOS
[2025-10-11 11:42:49] [INFO] ============================================================
[2025-10-11 11:42:49] [INFO] Updating ATH and ratios for 30 unique symbols...
[2025-10-11 11:42:49] [INFO] Fetching data for 30 unique symbols...
[2025-10-11 11:42:49] [INFO] Fetching batch ATH data for 30 symbols using yfinance...
[2025-10-11 11:44:47] [INFO] Batch processing completed: ATH data for 30 symbols, ratios for 0 symbols
[2025-10-11 11:44:47] [INFO] Fetching ratios individually for 30 symbols with rate limiting...
[2025-10-11 11:44:47] [INFO] Focusing on 5 priority symbols for ratios to avoid rate limiting
[2025-10-11 11:44:47] [INFO] Fetching ratios for HON (1/5)
[2025-10-11 11:44:48] [INFO] Got fast_info for HON
[2025-10-11 11:44:49] [INFO] SUCCESS: Got ratios for HON: PE=22.83068, EPS=8.8
[2025-10-11 11:44:54] [INFO] Fetching ratios for MSFT (2/5)
[2025-10-11 11:44:55] [INFO] Got fast_info for MSFT
[2025-10-11 11:44:56] [INFO] SUCCESS: Got ratios for MSFT: PE=37.460407, EPS=13.64
[2025-10-11 11:45:01] [INFO] Fetching ratios for JPM (3/5)
[2025-10-11 11:45:02] [INFO] Got fast_info for JPM
[2025-10-11 11:45:03] [INFO] SUCCESS: Got ratios for JPM: PE=15.430257, EPS=19.5
[2025-10-11 11:45:08] [INFO] Fetching ratios for HD (4/5)
[2025-10-11 11:45:09] [INFO] Got fast_info for HD
[2025-10-11 11:45:10] [INFO] SUCCESS: Got ratios for HD: PE=25.578625, EPS=14.69
[2025-10-11 11:45:15] [INFO] Fetching ratios for UNH (5/5)
[2025-10-11 11:45:16] [INFO] Got fast_info for UNH
[2025-10-11 11:45:17] [INFO] SUCCESS: Got ratios for UNH: PE=15.33968, EPS=23.11
[2025-10-11 11:45:22] [INFO] ATH update: 30 success, 0 failed
[2025-10-11 11:45:22] [INFO] Ratios update: 5 success, 25 failed
[2025-10-11 11:45:22] [INFO] ============================================================
[2025-10-11 11:45:22] [INFO] STEP 3: SCRAPING WEBSITES AND ANALYZING CHANGES
[2025-10-11 11:45:22] [INFO] ============================================================
[2025-10-11 11:45:22] [INFO] Processing Dow Jones...
[2025-10-11 11:45:22] [INFO] Fetching Dow Jones data from SlickCharts: https://www.slickcharts.com/dowjones
[2025-10-11 11:45:25] [INFO] SlickCharts HTTP response: 200
[2025-10-11 11:45:25] [INFO] Found 3 tables in SlickCharts HTML
[2025-10-11 11:45:25] [INFO] SlickCharts Row 1: GS - The Goldman Sachs Group, Inc. (10.33%)
[2025-10-11 11:45:25] [INFO] SlickCharts Row 2: MSFT - Microsoft Corporation (6.91%)
[2025-10-11 11:45:25] [INFO] SlickCharts Row 3: CAT - Caterpillar Inc. (6.64%)
[2025-10-11 11:45:25] [INFO] SlickCharts Dow Jones: extracted 30 companies in 2.9s
[2025-10-11 11:45:25] [INFO] Fetching Dow Jones data from StockAnalysis: https://stockanalysis.com/list/dow-jones-stocks/
[2025-10-11 11:45:28] [WARNING] StockAnalysis HTTP attempt 1/3 failed for Dow Jones: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/dow-jones-stocks/
[2025-10-11 11:45:28] [INFO] Retrying StockAnalysis Dow Jones in 3 seconds...
[2025-10-11 11:45:34] [WARNING] StockAnalysis HTTP attempt 2/3 failed for Dow Jones: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/dow-jones-stocks/
[2025-10-11 11:45:34] [INFO] Retrying StockAnalysis Dow Jones in 3 seconds...
[2025-10-11 11:45:39] [WARNING] StockAnalysis HTTP attempt 3/3 failed for Dow Jones: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/dow-jones-stocks/
[2025-10-11 11:45:39] [ERROR] All 3 HTTP attempts failed for StockAnalysis Dow Jones
[2025-10-11 11:45:39] [INFO] Dow Jones - Total constituents: 30
[2025-10-11 11:45:39] [INFO] ============================================================
[2025-10-11 11:45:39] [INFO] STEP 4: UPDATING DYNAMODB WITH CHANGES
[2025-10-11 11:45:39] [INFO] ============================================================
[2025-10-11 11:45:40] [INFO] DynamoDB table 'index-constituents' already exists
[2025-10-11 11:45:40] [INFO] Updating Dow Jones in DynamoDB...
[2025-10-11 11:45:40] [INFO] Clearing existing data for Dow Jones...
[2025-10-11 11:45:43] [INFO] Saved 30 Dow_Jones constituents to DynamoDB
[2025-10-11 11:45:43] [INFO] Updated 30 constituents for Dow Jones in DynamoDB
[2025-10-11 11:45:43] [INFO] Total DynamoDB records updated: 30
[2025-10-11 11:45:43] [INFO] ============================================================
[2025-10-11 11:45:43] [INFO] PROCESS SUMMARY
[2025-10-11 11:45:43] [INFO] ============================================================
[2025-10-11 11:45:43] [INFO] DETAILED BREAKDOWN:
[2025-10-11 11:45:43] [INFO] Step 1 - Data Loading: Loaded existing constituents from DynamoDB
[2025-10-11 11:45:43] [INFO] Step 2 - Market Data: ATH prices (30 success, 0 failed), Financial ratios (5 success, 25 failed)
[2025-10-11 11:45:43] [INFO] Step 3 - Website Changes: Added 0, Removed 0, Updated 0, Unchanged 30
[2025-10-11 11:45:43] [INFO] Step 4 - Database Update: Saved 30 records to DynamoDB
[2025-10-11 11:45:43] [INFO] Total execution time: 175.5s
[2025-10-11 11:45:43] [INFO] 
[2025-10-11 11:45:43] [INFO] ONE-LINE SUMMARY:
[2025-10-11 11:45:43] [INFO] Summary: Step1=LoadedFromDB, Step2=ATH(30✓/0✗)+Ratios(5✓/25✗), Step3=Changes(+0/-0/~0/=30), Step4=SavedToDB(30), Time=175.5s
[2025-10-11 11:45:44] [INFO] Health check ping sent successfully (success)
[2025-10-11 11:53:11] [INFO] Starting Nasdaq 100 constituents processing...
[2025-10-11 11:53:11] [INFO] Logs will be saved to: /Users/tony/Documents/Project/fund-quota/backend/fetch_constituents.log
[2025-10-11 11:53:11] [INFO] Using proxy for financial data fetching
[2025-10-11 11:53:11] [INFO] ATH batch size: 50, Ratios batch size: 50
[2025-10-11 11:53:11] [INFO] ============================================================
[2025-10-11 11:53:11] [INFO] STEP 1: LOADING EXISTING DATA FROM DYNAMODB
[2025-10-11 11:53:11] [INFO] ============================================================
[2025-10-11 11:53:11] [INFO] Found credentials in shared credentials file: ~/.aws/credentials
[2025-10-11 11:53:12] [INFO] DynamoDB table 'index-constituents' already exists
[2025-10-11 11:53:12] [INFO] Loading existing data for Nasdaq 100...
[2025-10-11 11:53:13] [INFO] Loaded 101 existing constituents for Nasdaq 100
[2025-10-11 11:53:13] [INFO] Total existing constituents loaded: 101
[2025-10-11 11:53:13] [INFO] ============================================================
[2025-10-11 11:53:13] [INFO] STEP 2: UPDATING ATH PRICES AND FINANCIAL RATIOS
[2025-10-11 11:53:13] [INFO] ============================================================
[2025-10-11 11:53:13] [INFO] Updating ATH and ratios for 101 unique symbols...
[2025-10-11 11:53:13] [INFO] Fetching data for 101 unique symbols...
[2025-10-11 11:53:13] [INFO] Fetching batch ATH data for 101 symbols using yfinance...
[2025-10-11 11:54:40] [INFO] Batch processing completed: ATH data for 101 symbols, ratios for 0 symbols
[2025-10-11 11:54:40] [INFO] Fetching financial ratios for all 101 symbols using batch Tickers API...
[2025-10-11 11:54:40] [INFO] Processing ratios batch 1/3: 50 symbols
[2025-10-11 11:54:44] [INFO] SUCCESS: Got ratios from batch for CMCSA: PE=4.885572
[2025-10-11 11:54:44] [INFO] SUCCESS: Got ratios from batch for FTNT: PE=33.083664
[2025-10-11 11:54:46] [INFO] SUCCESS: Got ratios from batch for IDXX: PE=51.30308
[2025-10-11 11:55:36] [INFO] Batch 1 completed: 50/50 ratios fetched
[2025-10-11 11:55:36] [INFO] Waiting 10s before next ratios batch...
[2025-10-11 11:55:46] [INFO] Processing ratios batch 2/3: 50 symbols
[2025-10-11 11:55:49] [INFO] SUCCESS: Got ratios from batch for LRCX: PE=31.65542
[2025-10-11 11:55:50] [INFO] SUCCESS: Got ratios from batch for ADSK: PE=63.229164
[2025-10-11 11:55:51] [INFO] SUCCESS: Got ratios from batch for SHOP: PE=83.9
[2025-10-11 11:56:41] [INFO] Batch 2 completed: 50/50 ratios fetched
[2025-10-11 11:56:41] [INFO] Waiting 10s before next ratios batch...
[2025-10-11 11:56:51] [INFO] Processing ratios batch 3/3: 1 symbols
[2025-10-11 11:57:04] [INFO] SUCCESS: Got ratios from batch for MNST: PE=43.242237
[2025-10-11 11:57:04] [INFO] Batch 3 completed: 1/1 ratios fetched
[2025-10-11 11:57:04] [INFO] Completed batch ratios fetching: 101/101 symbols processed
[2025-10-11 11:57:04] [INFO] ATH update: 101 success, 0 failed
[2025-10-11 11:57:04] [INFO] Ratios update: 101 success, 0 failed
[2025-10-11 11:57:04] [INFO] ============================================================
[2025-10-11 11:57:04] [INFO] STEP 3: SCRAPING WEBSITES AND ANALYZING CHANGES
[2025-10-11 11:57:04] [INFO] ============================================================
[2025-10-11 11:57:04] [INFO] Processing Nasdaq 100...
[2025-10-11 11:57:04] [INFO] Fetching Nasdaq 100 data from SlickCharts: https://www.slickcharts.com/nasdaq100
[2025-10-11 11:57:07] [INFO] SlickCharts HTTP response: 200
[2025-10-11 11:57:07] [INFO] Found 3 tables in SlickCharts HTML
[2025-10-11 11:57:07] [INFO] SlickCharts Row 1: NVDA - Nvidia (14.02%)
[2025-10-11 11:57:07] [INFO] SlickCharts Row 3: MSFT - Microsoft (11.94%)
[2025-10-11 11:57:07] [INFO] SlickCharts Nasdaq 100: extracted 101 companies in 2.9s
[2025-10-11 11:57:07] [INFO] Fetching Nasdaq 100 data from StockAnalysis: https://stockanalysis.com/list/nasdaq-100-stocks/
[2025-10-11 11:57:10] [WARNING] StockAnalysis HTTP attempt 1/3 failed for Nasdaq 100: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/nasdaq-100-stocks/
[2025-10-11 11:57:10] [INFO] Retrying StockAnalysis Nasdaq 100 in 3 seconds...
[2025-10-11 11:57:16] [WARNING] StockAnalysis HTTP attempt 2/3 failed for Nasdaq 100: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/nasdaq-100-stocks/
[2025-10-11 11:57:16] [INFO] Retrying StockAnalysis Nasdaq 100 in 3 seconds...
[2025-10-11 11:57:21] [WARNING] StockAnalysis HTTP attempt 3/3 failed for Nasdaq 100: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/nasdaq-100-stocks/
[2025-10-11 11:57:21] [ERROR] All 3 HTTP attempts failed for StockAnalysis Nasdaq 100
[2025-10-11 11:57:21] [INFO] Nasdaq 100 - Total constituents: 101
[2025-10-11 11:57:21] [INFO] ============================================================
[2025-10-11 11:57:21] [INFO] STEP 4: UPDATING DYNAMODB WITH CHANGES
[2025-10-11 11:57:21] [INFO] ============================================================
[2025-10-11 11:57:22] [INFO] DynamoDB table 'index-constituents' already exists
[2025-10-11 11:57:22] [INFO] Updating Nasdaq 100 in DynamoDB...
[2025-10-11 11:57:22] [INFO] Clearing existing data for Nasdaq 100...
[2025-10-11 11:57:27] [INFO] Saved 101 Nasdaq_100 constituents to DynamoDB
[2025-10-11 11:57:27] [INFO] Updated 101 constituents for Nasdaq 100 in DynamoDB
[2025-10-11 11:57:27] [INFO] Total DynamoDB records updated: 101
[2025-10-11 11:57:27] [INFO] ============================================================
[2025-10-11 11:57:27] [INFO] PROCESS SUMMARY
[2025-10-11 11:57:27] [INFO] ============================================================
[2025-10-11 11:57:27] [INFO] DETAILED BREAKDOWN:
[2025-10-11 11:57:27] [INFO] Step 1 - Data Loading: Loaded existing constituents from DynamoDB
[2025-10-11 11:57:27] [INFO] Step 2 - Market Data: ATH prices (101 success, 0 failed), Financial ratios (101 success, 0 failed)
[2025-10-11 11:57:27] [INFO] Step 3 - Website Changes: Added 0, Removed 0, Updated 0, Unchanged 101
[2025-10-11 11:57:27] [INFO] Step 4 - Database Update: Saved 101 records to DynamoDB
[2025-10-11 11:57:27] [INFO] Total execution time: 255.8s
[2025-10-11 11:57:27] [INFO] 
[2025-10-11 11:57:27] [INFO] ONE-LINE SUMMARY:
[2025-10-11 11:57:27] [INFO] Summary: Step1=LoadedFromDB, Step2=ATH(101✓/0✗)+Ratios(101✓/0✗), Step3=Changes(+0/-0/~0/=101), Step4=SavedToDB(101), Time=255.8s
[2025-10-11 11:57:27] [INFO] Health check ping sent successfully (success)
[2025-10-11 16:15:24] [INFO] Starting Nasdaq 100 constituents processing...
[2025-10-11 16:15:24] [INFO] Logs will be saved to: /Users/tony/Documents/Project/fund-quota/backend/fetch_constituents.log
[2025-10-11 16:15:24] [INFO] Using proxy for financial data fetching
[2025-10-11 16:15:24] [INFO] ATH batch size: 50, Ratios batch size: 50
[2025-10-11 16:15:24] [INFO] ============================================================
[2025-10-11 16:15:24] [INFO] STEP 1: LOADING EXISTING DATA FROM DYNAMODB
[2025-10-11 16:15:24] [INFO] ============================================================
[2025-10-11 16:15:24] [INFO] Found credentials in shared credentials file: ~/.aws/credentials
[2025-10-11 16:15:27] [INFO] DynamoDB table 'index-constituents' already exists
[2025-10-11 16:15:27] [INFO] Loading existing data for Nasdaq 100...
[2025-10-11 16:15:29] [INFO] Loaded 101 existing constituents for Nasdaq 100
[2025-10-11 16:15:29] [INFO] Total existing constituents loaded: 101
[2025-10-11 16:15:29] [INFO] ============================================================
[2025-10-11 16:15:29] [INFO] STEP 2: UPDATING ATH PRICES AND FINANCIAL RATIOS
[2025-10-11 16:15:29] [INFO] ============================================================
[2025-10-11 16:15:29] [INFO] Updating ATH and ratios for 101 unique symbols...
[2025-10-11 16:15:29] [INFO] Fetching data for 101 unique symbols...
[2025-10-11 16:15:29] [INFO] Fetching ATH and ratios data for 101 symbols in 3 batches of 50...
[2025-10-11 16:15:29] [INFO] Processing ATH batch 1/3: 50 symbols
[2025-10-11 16:16:12] [INFO] ATH batch 1 completed: 50/50 symbols processed
[2025-10-11 16:16:12] [INFO] Waiting 5s before next ATH batch...
[2025-10-11 16:16:17] [INFO] Processing ATH batch 2/3: 50 symbols
[2025-10-11 16:17:31] [INFO] ATH batch 2 completed: 50/50 symbols processed
[2025-10-11 16:17:31] [INFO] Waiting 5s before next ATH batch...
[2025-10-11 16:17:36] [INFO] Processing ATH batch 3/3: 1 symbols
[2025-10-11 16:17:39] [INFO] ATH batch 3 completed: 0/1 symbols processed
[2025-10-11 16:17:39] [INFO] ATH processing completed: 100/101 symbols processed
[2025-10-11 16:17:39] [INFO] Fetching financial ratios for all 101 symbols using batch Tickers API...
[2025-10-11 16:17:39] [INFO] Processing ratios batch 1/3: 50 symbols
[2025-10-11 16:17:44] [INFO] SUCCESS: Got ratios from batch for CDNS: PE=88.37838
[2025-10-11 16:17:45] [INFO] SUCCESS: Got ratios from batch for LRCX: PE=31.65542
[2025-10-11 16:17:46] [INFO] SUCCESS: Got ratios from batch for TTWO: PE=None
[2025-10-11 16:18:44] [INFO] Batch 1 completed: 50/50 ratios fetched
[2025-10-11 16:18:44] [INFO] Waiting 10s before next ratios batch...
[2025-10-11 16:18:54] [INFO] Processing ratios batch 2/3: 50 symbols
[2025-10-11 16:18:59] [INFO] SUCCESS: Got ratios from batch for AMZN: PE=32.98323
[2025-10-11 16:19:00] [INFO] SUCCESS: Got ratios from batch for CSGP: PE=290.69232
[2025-10-11 16:19:01] [INFO] SUCCESS: Got ratios from batch for LIN: PE=32.254444
[2025-10-11 16:19:57] [INFO] Batch 2 completed: 50/50 ratios fetched
[2025-10-11 16:19:57] [INFO] Waiting 10s before next ratios batch...
[2025-10-11 16:20:07] [INFO] Processing ratios batch 3/3: 1 symbols
[2025-10-11 16:20:11] [INFO] SUCCESS: Got ratios from batch for AVGO: PE=83.238464
[2025-10-11 16:20:11] [INFO] Batch 3 completed: 1/1 ratios fetched
[2025-10-11 16:20:11] [INFO] Completed batch ratios fetching: 101/101 symbols processed
[2025-10-11 16:20:11] [INFO] ATH update: 100 success, 1 failed
[2025-10-11 16:20:11] [INFO] Ratios update: 101 success, 0 failed
[2025-10-11 16:20:11] [INFO] ============================================================
[2025-10-11 16:20:11] [INFO] STEP 3: SCRAPING WEBSITES AND ANALYZING CHANGES
[2025-10-11 16:20:11] [INFO] ============================================================
[2025-10-11 16:20:11] [INFO] Processing Nasdaq 100...
[2025-10-11 16:20:11] [INFO] Fetching Nasdaq 100 data from SlickCharts: https://www.slickcharts.com/nasdaq100
[2025-10-11 16:20:14] [INFO] SlickCharts HTTP response: 200
[2025-10-11 16:20:14] [INFO] Found 3 tables in SlickCharts HTML
[2025-10-11 16:20:14] [INFO] SlickCharts Row 1: NVDA - Nvidia (14.02%)
[2025-10-11 16:20:14] [INFO] SlickCharts Row 3: MSFT - Microsoft (11.94%)
[2025-10-11 16:20:14] [INFO] SlickCharts Nasdaq 100: extracted 101 companies in 2.9s
[2025-10-11 16:20:14] [INFO] Fetching Nasdaq 100 data from StockAnalysis: https://stockanalysis.com/list/nasdaq-100-stocks/
[2025-10-11 16:20:17] [WARNING] StockAnalysis HTTP attempt 1/3 failed for Nasdaq 100: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/nasdaq-100-stocks/
[2025-10-11 16:20:17] [INFO] Retrying StockAnalysis Nasdaq 100 in 3 seconds...
[2025-10-11 16:20:22] [WARNING] StockAnalysis HTTP attempt 2/3 failed for Nasdaq 100: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/nasdaq-100-stocks/
[2025-10-11 16:20:22] [INFO] Retrying StockAnalysis Nasdaq 100 in 3 seconds...
[2025-10-11 16:20:28] [WARNING] StockAnalysis HTTP attempt 3/3 failed for Nasdaq 100: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/nasdaq-100-stocks/
[2025-10-11 16:20:28] [ERROR] All 3 HTTP attempts failed for StockAnalysis Nasdaq 100
[2025-10-11 16:20:28] [INFO] Nasdaq 100 - Total constituents: 101
[2025-10-11 16:20:28] [INFO] ============================================================
[2025-10-11 16:20:28] [INFO] STEP 4: UPDATING DYNAMODB WITH CHANGES
[2025-10-11 16:20:28] [INFO] ============================================================
[2025-10-11 16:20:29] [INFO] DynamoDB table 'index-constituents' already exists
[2025-10-11 16:20:29] [INFO] Updating Nasdaq 100 in DynamoDB...
[2025-10-11 16:20:29] [INFO] Clearing existing data for Nasdaq 100...
[2025-10-11 16:20:33] [INFO] Saved 101 Nasdaq_100 constituents to DynamoDB
[2025-10-11 16:20:33] [INFO] Updated 101 constituents for Nasdaq 100 in DynamoDB
[2025-10-11 16:20:33] [INFO] Total DynamoDB records updated: 101
[2025-10-11 16:20:33] [INFO] ============================================================
[2025-10-11 16:20:33] [INFO] PROCESS SUMMARY
[2025-10-11 16:20:33] [INFO] ============================================================
[2025-10-11 16:20:33] [INFO] DETAILED BREAKDOWN:
[2025-10-11 16:20:33] [INFO] Step 1 - Data Loading: Loaded existing constituents from DynamoDB
[2025-10-11 16:20:33] [INFO] Step 2 - Market Data: ATH prices (100 success, 1 failed), Financial ratios (101 success, 0 failed)
[2025-10-11 16:20:33] [INFO] Step 3 - Website Changes: Added 0, Removed 0, Updated 0, Unchanged 101
[2025-10-11 16:20:33] [INFO] Step 4 - Database Update: Saved 101 records to DynamoDB
[2025-10-11 16:20:33] [INFO] Total execution time: 309.2s
[2025-10-11 16:20:33] [INFO] 
[2025-10-11 16:20:33] [INFO] ONE-LINE SUMMARY:
[2025-10-11 16:20:33] [INFO] Summary: Step1=LoadedFromDB, Step2=ATH(100✓/1✗)+Ratios(101✓/0✗), Step3=Changes(+0/-0/~0/=101), Step4=SavedToDB(101), Time=309.2s
[2025-10-11 16:20:34] [INFO] Health check ping sent successfully (success)
[2025-10-11 17:10:25] [INFO] Starting Dow Jones constituents processing...
[2025-10-11 17:10:25] [INFO] Logs will be saved to: /Users/tony/Documents/Project/fund-quota/backend/fetch_constituents.log
[2025-10-11 17:10:25] [INFO] Using proxy for financial data fetching
[2025-10-11 17:10:25] [INFO] ATH batch size: 50, Ratios batch size: 50
[2025-10-11 17:10:25] [INFO] ============================================================
[2025-10-11 17:10:25] [INFO] STEP 1: LOADING EXISTING DATA FROM DYNAMODB
[2025-10-11 17:10:25] [INFO] ============================================================
[2025-10-11 17:10:25] [INFO] Found credentials in shared credentials file: ~/.aws/credentials
[2025-10-11 17:10:26] [INFO] DynamoDB table 'index-constituents' already exists
[2025-10-11 17:10:26] [INFO] Loading existing data for Dow Jones...
[2025-10-11 17:10:28] [INFO] Loaded 30 existing constituents for Dow Jones
[2025-10-11 17:10:28] [INFO] Total existing constituents loaded: 30
[2025-10-11 17:10:28] [INFO] ============================================================
[2025-10-11 17:10:28] [INFO] STEP 2: UPDATING ATH PRICES AND FINANCIAL RATIOS
[2025-10-11 17:10:28] [INFO] ============================================================
[2025-10-11 17:10:28] [INFO] Updating ATH and ratios for 30 unique symbols...
[2025-10-11 17:10:28] [INFO] Fetching data for 30 unique symbols...
[2025-10-11 17:10:28] [INFO] Fetching ATH, current prices, daily changes, and ratios data for 30 symbols in 1 batches of 50...
[2025-10-11 17:10:28] [INFO] Processing ATH batch 1/1: 30 symbols
[2025-10-11 17:11:56] [INFO] Price data for TRV: $270.12 (-1.56%)
[2025-10-11 17:11:56] [INFO] Price data for HON: $200.91 (-1.63%)
[2025-10-11 17:11:56] [INFO] Price data for VZ: $39.85 (-0.72%)
[2025-10-11 17:11:59] [INFO] ATH batch 1 completed: 30/30 symbols processed
[2025-10-11 17:11:59] [INFO] ATH processing completed: 30/30 symbols processed
[2025-10-11 17:11:59] [INFO] Fetching financial ratios for all 30 symbols using batch Tickers API...
[2025-10-11 17:11:59] [INFO] Processing ratios batch 1/1: 30 symbols
[2025-10-11 17:12:04] [INFO] SUCCESS: Got ratios from batch for TRV: PE=11.946925
[2025-10-11 17:12:06] [INFO] SUCCESS: Got ratios from batch for HON: PE=22.83068
[2025-10-11 17:12:07] [INFO] SUCCESS: Got ratios from batch for VZ: PE=9.267441
[2025-10-11 17:12:41] [INFO] Batch 1 completed: 30/30 ratios fetched
[2025-10-11 17:12:41] [INFO] Completed batch ratios fetching: 30/30 symbols processed
[2025-10-11 17:12:41] [INFO] ATH update: 30 success, 0 failed
[2025-10-11 17:12:41] [INFO] Ratios update: 30 success, 0 failed
[2025-10-11 17:12:41] [INFO] ============================================================
[2025-10-11 17:12:41] [INFO] STEP 3: SCRAPING WEBSITES AND ANALYZING CHANGES
[2025-10-11 17:12:41] [INFO] ============================================================
[2025-10-11 17:12:41] [INFO] Processing Dow Jones...
[2025-10-11 17:12:41] [INFO] Fetching Dow Jones data from SlickCharts: https://www.slickcharts.com/dowjones
[2025-10-11 17:12:44] [INFO] SlickCharts HTTP response: 200
[2025-10-11 17:12:44] [INFO] Found 3 tables in SlickCharts HTML
[2025-10-11 17:12:44] [INFO] SlickCharts Row 1: GS - The Goldman Sachs Group, Inc. (10.33%)
[2025-10-11 17:12:44] [INFO] SlickCharts Row 2: MSFT - Microsoft Corporation (6.91%)
[2025-10-11 17:12:44] [INFO] SlickCharts Row 3: CAT - Caterpillar Inc. (6.64%)
[2025-10-11 17:12:44] [INFO] SlickCharts Dow Jones: extracted 30 companies in 2.9s
[2025-10-11 17:12:44] [INFO] Fetching Dow Jones data from StockAnalysis: https://stockanalysis.com/list/dow-jones-stocks/
[2025-10-11 17:12:47] [WARNING] StockAnalysis HTTP attempt 1/3 failed for Dow Jones: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/dow-jones-stocks/
[2025-10-11 17:12:47] [INFO] Retrying StockAnalysis Dow Jones in 3 seconds...
[2025-10-11 17:12:52] [WARNING] StockAnalysis HTTP attempt 2/3 failed for Dow Jones: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/dow-jones-stocks/
[2025-10-11 17:12:52] [INFO] Retrying StockAnalysis Dow Jones in 3 seconds...
[2025-10-11 17:12:58] [WARNING] StockAnalysis HTTP attempt 3/3 failed for Dow Jones: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/dow-jones-stocks/
[2025-10-11 17:12:58] [ERROR] All 3 HTTP attempts failed for StockAnalysis Dow Jones
[2025-10-11 17:12:58] [INFO] Dow Jones - Total constituents: 30
[2025-10-11 17:12:58] [INFO] ============================================================
[2025-10-11 17:12:58] [INFO] STEP 4: UPDATING DYNAMODB WITH CHANGES
[2025-10-11 17:12:58] [INFO] ============================================================
[2025-10-11 17:12:59] [INFO] DynamoDB table 'index-constituents' already exists
[2025-10-11 17:12:59] [INFO] Updating Dow Jones in DynamoDB...
[2025-10-11 17:12:59] [INFO] Clearing existing data for Dow Jones...
[2025-10-11 17:13:01] [INFO] Saved 30 Dow_Jones constituents to DynamoDB
[2025-10-11 17:13:01] [INFO] Updated 30 constituents for Dow Jones in DynamoDB
[2025-10-11 17:13:01] [INFO] Total DynamoDB records updated: 30
[2025-10-11 17:13:01] [INFO] ============================================================
[2025-10-11 17:13:01] [INFO] PROCESS SUMMARY
[2025-10-11 17:13:01] [INFO] ============================================================
[2025-10-11 17:13:01] [INFO] DETAILED BREAKDOWN:
[2025-10-11 17:13:01] [INFO] Step 1 - Data Loading: Loaded existing constituents from DynamoDB
[2025-10-11 17:13:01] [INFO] Step 2 - Market Data: ATH prices (30 success, 0 failed), Financial ratios (30 success, 0 failed)
[2025-10-11 17:13:01] [INFO] Step 3 - Website Changes: Added 0, Removed 0, Updated 0, Unchanged 30
[2025-10-11 17:13:01] [INFO] Step 4 - Database Update: Saved 30 records to DynamoDB
[2025-10-11 17:13:01] [INFO] Total execution time: 156.1s
[2025-10-11 17:13:01] [INFO] 
[2025-10-11 17:13:01] [INFO] ONE-LINE SUMMARY:
[2025-10-11 17:13:01] [INFO] Summary: Step1=LoadedFromDB, Step2=ATH(30✓/0✗)+Ratios(30✓/0✗), Step3=Changes(+0/-0/~0/=30), Step4=SavedToDB(30), Time=156.1s
[2025-10-11 17:13:02] [INFO] Health check ping sent successfully (success)
[2025-10-11 17:22:54] [INFO] Starting Dow Jones constituents processing...
[2025-10-11 17:22:54] [INFO] Logs will be saved to: /Users/tony/Documents/Project/fund-quota/backend/fetch_constituents.log
[2025-10-11 17:22:54] [INFO] Using proxy for financial data fetching
[2025-10-11 17:22:54] [INFO] ATH batch size: 50, Ratios batch size: 50
[2025-10-11 17:22:54] [INFO] ============================================================
[2025-10-11 17:22:54] [INFO] STEP 1: LOADING EXISTING DATA FROM DYNAMODB
[2025-10-11 17:22:54] [INFO] ============================================================
[2025-10-11 17:22:54] [INFO] Found credentials in shared credentials file: ~/.aws/credentials
[2025-10-11 17:22:55] [INFO] DynamoDB table 'index-constituents' already exists
[2025-10-11 17:22:55] [INFO] Loading existing data for Dow Jones...
[2025-10-11 17:22:55] [INFO] Loaded 30 existing constituents for Dow Jones
[2025-10-11 17:22:55] [INFO] Total existing constituents loaded: 30
[2025-10-11 17:22:55] [INFO] ============================================================
[2025-10-11 17:22:55] [INFO] STEP 2: UPDATING ATH PRICES AND FINANCIAL RATIOS
[2025-10-11 17:22:55] [INFO] ============================================================
[2025-10-11 17:22:55] [INFO] Updating ATH and ratios for 30 unique symbols...
[2025-10-11 17:22:55] [INFO] Fetching data for 30 unique symbols...
[2025-10-11 17:22:55] [INFO] Fetching ATH, current prices, daily changes, and ratios data for 30 symbols in 1 batches of 50...
[2025-10-11 17:22:55] [INFO] Processing ATH batch 1/1: 30 symbols
[2025-10-11 17:23:54] [ERROR] 
1 Failed download:
[2025-10-11 17:23:54] [ERROR] ['VZ']: Timeout('Failed to perform, curl: (28) Connection timed out after 30002 milliseconds. See https://curl.se/libcurl/c/libcurl-errors.html first for more details.')
[2025-10-11 17:24:06] [INFO] Price data for IBM: $277.82 (-3.61%)
[2025-10-11 17:24:06] [INFO] Price data for KO: $67.04 (+1.01%)
[2025-10-11 17:24:06] [INFO] Price data for HD: $375.75 (-0.51%)
[2025-10-11 17:24:09] [INFO] ATH batch 1 completed: 29/30 symbols processed
[2025-10-11 17:24:09] [INFO] ATH processing completed: 29/30 symbols processed
[2025-10-11 17:24:09] [INFO] Fetching financial ratios for all 30 symbols using batch Tickers API...
[2025-10-11 17:24:09] [INFO] Processing ratios batch 1/1: 30 symbols
[2025-10-11 17:24:14] [INFO] SUCCESS: Got ratios from batch for VZ: PE=9.267441
[2025-10-11 17:24:15] [INFO] SUCCESS: Got ratios from batch for IBM: PE=44.80968
[2025-10-11 17:24:16] [INFO] SUCCESS: Got ratios from batch for KO: PE=23.77305
[2025-10-11 17:24:46] [INFO] Batch 1 completed: 30/30 ratios fetched
[2025-10-11 17:24:46] [INFO] Completed batch ratios fetching: 30/30 symbols processed
[2025-10-11 17:24:46] [INFO] ATH update: 29 success, 1 failed
[2025-10-11 17:24:46] [INFO] Ratios update: 30 success, 0 failed
[2025-10-11 17:24:46] [INFO] ============================================================
[2025-10-11 17:24:46] [INFO] STEP 3: SCRAPING WEBSITES AND ANALYZING CHANGES
[2025-10-11 17:24:46] [INFO] ============================================================
[2025-10-11 17:24:46] [INFO] Processing Dow Jones...
[2025-10-11 17:24:46] [INFO] Fetching Dow Jones data from SlickCharts: https://www.slickcharts.com/dowjones
[2025-10-11 17:24:49] [INFO] SlickCharts HTTP response: 200
[2025-10-11 17:24:49] [INFO] Found 3 tables in SlickCharts HTML
[2025-10-11 17:24:49] [INFO] SlickCharts Row 1: GS - The Goldman Sachs Group, Inc. (10.33%)
[2025-10-11 17:24:49] [INFO] SlickCharts Row 2: MSFT - Microsoft Corporation (6.91%)
[2025-10-11 17:24:49] [INFO] SlickCharts Row 3: CAT - Caterpillar Inc. (6.64%)
[2025-10-11 17:24:49] [INFO] SlickCharts Dow Jones: extracted 30 companies in 2.9s
[2025-10-11 17:24:49] [INFO] Fetching Dow Jones data from StockAnalysis: https://stockanalysis.com/list/dow-jones-stocks/
[2025-10-11 17:24:51] [WARNING] StockAnalysis HTTP attempt 1/3 failed for Dow Jones: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/dow-jones-stocks/
[2025-10-11 17:24:51] [INFO] Retrying StockAnalysis Dow Jones in 3 seconds...
[2025-10-11 17:24:57] [WARNING] StockAnalysis HTTP attempt 2/3 failed for Dow Jones: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/dow-jones-stocks/
[2025-10-11 17:24:57] [INFO] Retrying StockAnalysis Dow Jones in 3 seconds...
[2025-10-11 17:25:03] [WARNING] StockAnalysis HTTP attempt 3/3 failed for Dow Jones: 403 Client Error: Forbidden for url: https://stockanalysis.com/list/dow-jones-stocks/
[2025-10-11 17:25:03] [ERROR] All 3 HTTP attempts failed for StockAnalysis Dow Jones
[2025-10-11 17:25:03] [INFO] Dow Jones - Total constituents: 30
[2025-10-11 17:25:03] [INFO] ============================================================
[2025-10-11 17:25:03] [INFO] STEP 4: UPDATING DYNAMODB WITH CHANGES
[2025-10-11 17:25:03] [INFO] ============================================================
[2025-10-11 17:25:04] [INFO] DynamoDB table 'index-constituents' already exists
[2025-10-11 17:25:04] [INFO] Updating Dow Jones in DynamoDB...
[2025-10-11 17:25:04] [INFO] Clearing existing data for Dow Jones...
[2025-10-11 17:25:06] [INFO] Saved 30 Dow_Jones constituents to DynamoDB
[2025-10-11 17:25:06] [INFO] Updated 30 constituents for Dow Jones in DynamoDB
[2025-10-11 17:25:06] [INFO] Total DynamoDB records updated: 30
[2025-10-11 17:25:06] [INFO] ============================================================
[2025-10-11 17:25:06] [INFO] PROCESS SUMMARY
[2025-10-11 17:25:06] [INFO] ============================================================
[2025-10-11 17:25:06] [INFO] DETAILED BREAKDOWN:
[2025-10-11 17:25:06] [INFO] Step 1 - Data Loading: Loaded existing constituents from DynamoDB
[2025-10-11 17:25:06] [INFO] Step 2 - Market Data: ATH prices (29 success, 1 failed), Financial ratios (30 success, 0 failed)
[2025-10-11 17:25:06] [INFO] Step 3 - Website Changes: Added 0, Removed 0, Updated 0, Unchanged 30
[2025-10-11 17:25:06] [INFO] Step 4 - Database Update: Saved 30 records to DynamoDB
[2025-10-11 17:25:06] [INFO] Total execution time: 132.2s
[2025-10-11 17:25:06] [INFO] 
[2025-10-11 17:25:06] [INFO] ONE-LINE SUMMARY:
[2025-10-11 17:25:06] [INFO] Summary: Step1=LoadedFromDB, Step2=ATH(29✓/1✗)+Ratios(30✓/0✗), Step3=Changes(+0/-0/~0/=30), Step4=SavedToDB(30), Time=132.2s
[2025-10-11 17:25:07] [INFO] Health check ping sent successfully (success)
